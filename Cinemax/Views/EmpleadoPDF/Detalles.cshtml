@{
    ViewBag.Title = "Detalles";
    Layout = "~/Views/Shared/_LayoutEmpleado.cshtml";
}
@model Cinemax.ViewModels.ReservaViewModel

<div class="container py-4">
    <div>
        <div class="card border-0 shadow-lg" style="max-width: 500px; margin: 0 auto;">

            <div class="card-header py-3" style="background-color: #D8BFD8; color: white;">
                <h4 class="mb-0 fw-normal">Detalles de la reserva #@Model.ID_Reserva</h4>
            </div>

            <div class="card-body p-4">

                <div class="mb-4">
                    <div class="text-primary fs-5 mb-1">@Model.PeliculaNombre</div>
                    <div class="text-muted">Película</div>
                </div>


                <div class="row g-3 mb-4">
                    <div class="col-6">
                        <div class="border-bottom pb-2">
                            <div class="text-secondary mb-1">Función</div>
                            <div>@Model.FuncionFecha.ToString("dd/MM/yyyy HH:mm")</div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="border-bottom pb-2">
                            <div class="text-secondary mb-1">Precio</div>
                            <div>$@Model.Precio.ToString("0.00")</div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="border-bottom pb-2">
                            <div class="text-secondary mb-1">Sala</div>
                            <div>@Model.SalaNombre</div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="border-bottom pb-2">
                            <div class="text-secondary mb-1">Asientos</div>
                            <div>@Model.Asientos</div>
                        </div>
                    </div>
                </div>


                <div class="mb-4 p-3 bg-light rounded">
                    @if (!string.IsNullOrEmpty(Model.QRImagen))
                    {
                        <div class="qr-container" style="text-align: center; margin: 20px 0;">
                            <img src="@Model.QRImagen" alt="Código QR de reserva @Model.QRTexto"
                                 style="width: 150px; height: 150px;" />

                        </div>
                    }
                </div>


                <div class="mb-4">
                    <div class="d-flex align-items-center">
                        <div class="text-secondary me-2">Estado:</div>
                        <span class="badge @(Model.Estado == "Pendiente" ? "bg-warning text-dark" :
                                        Model.Estado == "Cancelada" ? "bg-danger" :
                                        "bg-success") px-3 py-2">
                            @Model.Estado
                        </span>
                    </div>
                </div>


                <div class="d-flex justify-content-between pt-3 border-top">

                    <a href="@Url.Action("Editar", "EmpleadoHistorial", new { id = Model.ID_Reserva })" class="btn btn-outline-primary px-4">
                        <i class="fas fa-edit me-2"></i>Editar
                    </a>

                    <!-- Botón para descargar PDF -->
                    <a href="@Url.Action("DetallesPDF", "EmpleadoPDF",new { id = Model.ID_Reserva })" class="btn btn-outline-success px-4" target="_blank">
                        <i class="fas fa-file-pdf me-2"></i>Ticket PDF
                    </a>

                    <a href="@Url.Action("HistorialReservas", "EmpleadoHistorial")" class="btn btn-secondary px-4">
                        <i class="fas fa-times me-2"></i>Cerrar
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>



